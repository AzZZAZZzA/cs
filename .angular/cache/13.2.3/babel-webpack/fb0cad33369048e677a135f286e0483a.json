{"ast":null,"code":"import * as i0 from \"@angular/core\";\nimport * as i1 from \"../shared/ICarOwnersService\";\nimport * as i2 from \"../view/view.component\";\nimport * as i3 from \"@angular/forms\";\nimport * as i4 from \"@angular/common\";\n\nfunction CudComponent_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 10);\n    i0.ɵɵelementStart(1, \"div\", 11);\n    i0.ɵɵelementStart(2, \"div\", 12);\n    i0.ɵɵelement(3, \"input\", 13);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"div\", 12);\n    i0.ɵɵelement(5, \"input\", 14);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"div\", 12);\n    i0.ɵɵelement(7, \"input\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"div\", 12);\n    i0.ɵɵelement(9, \"input\", 16);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const i_r2 = ctx.index;\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"formGroupName\", i_r2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"id\", \"aIdNumber\" + i_r2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"id\", \"aManufacturer\" + i_r2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"id\", \"aModel\" + i_r2);\n    i0.ɵɵadvance(2);\n    i0.ɵɵpropertyInterpolate(\"id\", \"aYear\" + i_r2);\n  }\n}\n\nexport let CudComponent = /*#__PURE__*/(() => {\n  class CudComponent {\n    constructor(carOwnersService, viewComponent, fb) {\n      this.carOwnersService = carOwnersService;\n      this.viewComponent = viewComponent;\n      this.fb = fb;\n    }\n\n    add(owner) {\n      if (owner.id < this.viewComponent.owners.length) {\n        this.carOwnersService.updateOwner(owner);\n        console.log(owner);\n        this.viewComponent.owners.splice(owner.id, 1, owner);\n      } else {\n        this.carOwnersService.createOwner(owner).subscribe(owner => {\n          this.viewComponent.owners.push(owner);\n        });\n      }\n    }\n\n    createaCar() {\n      return this.fb.group({\n        aIdNumber: [null],\n        aManufacturer: [null],\n        aModel: [null],\n        aYear: [null]\n      });\n    }\n\n    getCarToForm(i) {\n      return this.fb.group({\n        aIdNumber: [this.viewComponent.ownerById.aCars[i].aIdNumber],\n        aManufacturer: [this.viewComponent.ownerById.aCars[i].aManufacturer],\n        aModel: [this.viewComponent.ownerById.aCars[i].aModel],\n        aYear: [this.viewComponent.ownerById.aCars[i].aYear]\n      });\n    }\n\n    get aCars() {\n      return this.aOwnerForm.get('aCars');\n    }\n\n    addaCar() {\n      this.aCars.push(this.createaCar());\n    }\n\n    cudDown() {\n      this.viewComponent.ownerById.id = -2;\n    }\n\n    ngOnInit() {\n      if (this.viewComponent.ownerById.id < 0) {\n        this.aOwnerForm = this.fb.group({\n          id: [this.viewComponent.owners.length],\n          aLastName: [null],\n          aFirstName: [null],\n          aMiddleName: [null],\n          aCars: this.fb.array([this.createaCar()])\n        });\n      } else {\n        let cars = [];\n\n        for (let i = 0; i < this.viewComponent.ownerById.aCars.length; i++) {\n          cars.push(this.getCarToForm(i));\n        }\n\n        this.aOwnerForm = this.fb.group({\n          id: [this.viewComponent.ownerById.id],\n          aLastName: [this.viewComponent.ownerById.aLastName],\n          aFirstName: [this.viewComponent.ownerById.aFirstName],\n          aMiddleName: [this.viewComponent.ownerById.aMiddleName],\n          aCars: this.fb.array(cars)\n        });\n      }\n    }\n\n  }\n\n  CudComponent.ɵfac = function CudComponent_Factory(t) {\n    return new (t || CudComponent)(i0.ɵɵdirectiveInject(i1.CarOwnersService), i0.ɵɵdirectiveInject(i2.ViewComponent), i0.ɵɵdirectiveInject(i3.FormBuilder));\n  };\n\n  CudComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: CudComponent,\n    selectors: [[\"app-cud\"]],\n    decls: 14,\n    vars: 3,\n    consts: [[1, \"container\"], [\"novalidate\", \"\", 1, \"text-center\", \"border\", \"border-light\", \"p-5\", 3, \"formGroup\", \"ngSubmit\"], [\"formControlName\", \"aLastName\", \"type\", \"text\", \"required\", \"\", 1, \"form-control\", \"mb-4\"], [\"formControlName\", \"aFirstName\", \"type\", \"text\", \"required\", \"\", 1, \"form-control\", \"mb-4\"], [\"formControlName\", \"aMiddleName\", \"type\", \"text\", \"required\", \"\", 1, \"form-control\", \"mb-4\"], [\"formArrayName\", \"aCars\", \"class\", \"carTableRow\", 4, \"ngFor\", \"ngForOf\"], [1, \"row\"], [1, \"col-md-3\"], [1, \"btn\", \"btn-danger\", 3, \"click\"], [1, \"btn\", \"btn-danger\", 3, \"disabled\"], [\"formArrayName\", \"aCars\", 1, \"carTableRow\"], [1, \"row\", \"carTableRow\", 3, \"formGroupName\"], [1, \"col-md-5\"], [\"formControlName\", \"aIdNumber\", \"type\", \"text\", \"required\", \"\", 1, \"form-control\", \"mb-4\", 3, \"id\"], [\"formControlName\", \"aManufacturer\", \"type\", \"text\", \"required\", \"\", 1, \"form-control\", \"mb-4\", 3, \"id\"], [\"formControlName\", \"aModel\", \"type\", \"text\", \"required\", \"\", 1, \"form-control\", \"mb-4\", 3, \"id\"], [\"formControlName\", \"aYear\", \"type\", \"number\", \"required\", \"\", 1, \"form-control\", \"mb-4\", 3, \"id\"]],\n    template: function CudComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0);\n        i0.ɵɵelementStart(1, \"form\", 1);\n        i0.ɵɵlistener(\"ngSubmit\", function CudComponent_Template_form_ngSubmit_1_listener() {\n          return ctx.add(ctx.aOwnerForm.value);\n        });\n        i0.ɵɵelement(2, \"input\", 2);\n        i0.ɵɵelement(3, \"input\", 3);\n        i0.ɵɵelement(4, \"input\", 4);\n        i0.ɵɵtemplate(5, CudComponent_div_5_Template, 10, 5, \"div\", 5);\n        i0.ɵɵelementStart(6, \"div\", 6);\n        i0.ɵɵelementStart(7, \"div\", 7);\n        i0.ɵɵelementStart(8, \"button\", 8);\n        i0.ɵɵlistener(\"click\", function CudComponent_Template_button_click_8_listener() {\n          return ctx.addaCar();\n        });\n        i0.ɵɵtext(9, \"Add Car\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"button\", 9);\n        i0.ɵɵtext(11, \"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(12, \"button\", 8);\n        i0.ɵɵlistener(\"click\", function CudComponent_Template_button_click_12_listener() {\n          return ctx.cudDown();\n        });\n        i0.ɵɵtext(13, \"\\u041D\\u0430\\u0437\\u0430\\u0434\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n\n      if (rf & 2) {\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"formGroup\", ctx.aOwnerForm);\n        i0.ɵɵadvance(4);\n        i0.ɵɵproperty(\"ngForOf\", ctx.aCars.controls);\n        i0.ɵɵadvance(5);\n        i0.ɵɵproperty(\"disabled\", ctx.aOwnerForm.invalid);\n      }\n    },\n    directives: [i3.ɵNgNoValidate, i3.NgControlStatusGroup, i3.FormGroupDirective, i3.DefaultValueAccessor, i3.NgControlStatus, i3.FormControlName, i3.RequiredValidator, i4.NgForOf, i3.FormArrayName, i3.FormGroupName, i3.NumberValueAccessor],\n    styles: [\"form[_ngcontent-%COMP%]{display:flex;flex-direction:column}form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:300px}form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100px}.carTableRow[_ngcontent-%COMP%]{display:flex}.ng-invalid[_ngcontent-%COMP%]{border-color:red}\"]\n  });\n  CudComponent.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: CudComponent,\n    factory: CudComponent.ɵfac,\n    providedIn: 'root'\n  });\n  return CudComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}